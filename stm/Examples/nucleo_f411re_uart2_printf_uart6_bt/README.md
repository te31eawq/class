## 프로젝트 설명

이 프로젝트는 STM32 마이크로컨트롤러를 사용하여 USB 및 블루투스 통신을 통해 데이터를 송수신하는 시스템입니다. USART2는 USB-시리얼 디버깅 용도로 사용되며, USART6는 블루투스 및 WiFi 모듈과의 통신을 담당합니다. 이 시스템은 UART 인터럽트 방식으로 데이터를 처리하고, 특정 명령을 수신하면 LED를 제어하거나 해당 명령을 다른 장치로 전송하는 기능을 제공합니다.

### 기능

1. **USART2 (USB-시리얼 디버깅)**  
   - PA2 (USART2_TX)와 PA3 (USART2_RX) 핀을 사용하여 USB와 시리얼 간의 디버깅 데이터를 송수신합니다.

2. **USART6 (블루투스 및 WiFi 통신)**  
   - PC6 (USART6_TX)와 PC7 (USART6_RX) 핀을 사용하여 블루투스 및 WiFi 모듈과 통신합니다.

3. **LED 제어**  
   - 블루투스에서 수신한 명령에 따라 LED를 제어합니다. 수신된 데이터가 특정 형식을 만족하면 LED를 켜거나 끄는 기능이 구현되어 있습니다.

### 주요 코드 설명

#### 1. **USART 인터럽트 기반 데이터 수신**
   - USART2 및 USART6의 데이터 수신은 인터럽트 방식으로 처리됩니다. 수신된 데이터는 `HAL_UART_RxCpltCallback` 함수에서 처리되어 `rx2Data` 및 `btData` 배열에 저장됩니다.
   - USART2에서는 USB-시리얼 디버깅 데이터를 처리하고, USART6에서는 블루투스 모듈과의 통신 데이터를 처리합니다.

#### 2. **블루투스 명령 처리**
   - 수신된 블루투스 데이터는 `bluetooth_Event` 함수에서 처리됩니다. 명령은 `[ID]CMD@PARAM` 형식으로 전송되며, 이 명령을 분석하여 LED를 제어하거나 다른 명령을 처리합니다.
   - 예를 들어, `LED@ON` 명령을 수신하면 LED가 켜지고, `LED@OFF` 명령을 수신하면 LED가 꺼집니다.

#### 3. **LED 제어**
   - `MX_GPIO_LED_ON` 및 `MX_GPIO_LED_OFF` 함수는 LED의 상태를 제어합니다. 이를 통해 블루투스에서 수신한 명령에 따라 LED의 상태를 변경할 수 있습니다.

#### 4. **UART 송신**
   - UART 송신은 `__io_putchar` 또는 `fputc` 함수를 통해 이루어지며, 디버깅 메시지나 블루투스 명령에 대한 응답을 USART2를 통해 출력합니다.

### 핀 설정

- **USART2 (USB-시리얼 디버깅)**  
  - PA2 (TX)  
  - PA3 (RX)

- **USART6 (블루투스 및 WiFi 통신)**  
  - PC6 (TX)  
  - PC7 (RX)

- **LED 제어**  
  - LD2 (디지털 출력)

### 빌드 및 실행

1. STM32CubeMX를 사용하여 프로젝트를 설정하고, 필요한 핀 및 UART 설정을 구성합니다.
2. 해당 프로젝트를 STM32 IDE(예: STM32CubeIDE)로 열고 빌드합니다.
3. 프로그램을 STM32 보드에 업로드한 후, USB 또는 블루투스를 통해 디버깅 및 명령 수신을 테스트합니다.

### 동작 예시

1. **USB-시리얼 디버깅**
   - `USART2`를 통해 디버깅 메시지를 출력합니다.
   - 예: `start main2()`

2. **블루투스 명령 수신 및 LED 제어**
   - `LED@ON` 명령을 수신하면 LED가 켜집니다.
   - `LED@OFF` 명령을 수신하면 LED가 꺼집니다.

### 참고

- UART 통신을 사용한 블루투스 및 USB 시리얼 디버깅 기능은 STM32 마이크로컨트롤러의 기본 UART 드라이버를 활용하여 구현되었습니다.
- 명령 수신 및 처리 로직은 `strtok`를 이용한 문자열 파싱을 기반으로 하며, 이를 통해 수신된 명령을 처리합니다.